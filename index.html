<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sakamichi Oshi</title>
</head>
<body>
    <div id="app">
        <div>
            <select v-model="selectedmember.group">
                <option v-for="grp in getGroups()">{{grp}}</option>
            </select>
            <select v-model="selectedmember.name">
                <option v-for="name in selectGroup(selectedmember)">{{name}}</option>
            </select>
            <input name="推しパーセント" type="number" v-model="selectedmember.oshi" v-validate="{ min_value : 1, max_value : 100}" />
            <button v-on:click="addOshi" :disabled="fields.推しパーセント && fields.推しパーセント.invalid">推し</button>
             <span>{{ errors.first('推しパーセント') }}</span>
        </div>
        <ul>
            <li v-for="oshimember in oshimembers" v-bind:key="oshimember.id">
                <div v-show="oshimember.edit == false" @dblclick = "oshimember.edit = true">{{oshimember.group}}：{{oshimember.name}}:{{oshimember.oshi}}</div>
                <div v-show="oshimember.edit == true" >
                    <select v-on:ValueChange="selectGroup(oshimember)" v-model="oshimember.group">
                        <option v-for="grp in getGroups()">{{grp}}</option>
                    </select>
                    <select v-model="oshimember.name">
                        <option v-for="name in selectGroup(oshimember)">{{name}}</option>
                    </select>
                    <input type="number" v-model="oshimember.oshi" />
                    <!-- ref https://jsfiddle.net/jpeter06/ppyeo1tg/ -->
                    <button v-on:click="oshimember.edit=false; $emit('update')">推し</button>
                    <button v-on:click="deleteOshi(oshimember); oshimember.edit=false; $emit('update')">削除</button>
                </div>
            </li>
        </ul>
    </div>
    <script src="./js/validation/vee-validate.min.js"></script>
    <script src="./js/validation/locale/ja.js"></script>
    <script src="./js/vue.min.js"></script>
    <script src="./js/app.js"></script>
</body>
</html>